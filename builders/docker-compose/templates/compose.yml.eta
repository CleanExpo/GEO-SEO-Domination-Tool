version: '3.9'
services:
  <%= SERVICE_NAME || 'web' %>:
    build:
      context: .
      dockerfile: infra/docker/web.Dockerfile
      args:
        - NODE_VERSION=<%= NODE_VERSION || '20' %>
    image: <%= (IMAGE_PREFIX ? IMAGE_PREFIX + '/' : '') + (SERVICE_NAME || 'web') %>:latest
    ports:
      - "<%= PORT || '3000' %>:3000"
    env_file:
      - web-app/.env.local
    restart: unless-stopped
    # Example volumes for dev (commented for prod)
    # volumes:
    #   - ./:/app
